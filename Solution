using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;

namespace firstProblemMidleExam
{
    internal class Program
    {
        static void Main(string[] args)
        {

            List<string> input = Console.ReadLine().Split(' ', StringSplitOptions.RemoveEmptyEntries).ToList();

            while (true)
            {
                List<string> command = Console.ReadLine().Split(' ', StringSplitOptions.RemoveEmptyEntries).ToList();


                if (command[0] == "3:1")
                {
                    break;
                }
                else if (command[0] == "merge")  // Ivo Johny Tony Bony Mony , 0 3, 3 4, 0 3 , IvoBony Johny Tony, Mony , // 
                {
                    int index1 = int.Parse(command[1]);
                    int index2 = int.Parse(command[2]);

                    if (index1 < 0)
                    {
                        index1 = 0; ;
                    }
                    if (index2> input.Count-1)
                    {
                        index2 = input.Count - 1;
                    }
                    if (index1 > input.Count || index2 < 0)
                    {
                        continue;
                    }
                    
                        for (int i = index1; i < index2; i++)
                        {
                            int current = index1; // ab cd ef cc cc cc cc - 
                            string add = input[i + 1];           // abcd 
                            input[current] += add;
                            input[i + 1] = "toberemoved";

                        }
                        for (int k = 0; k < input.Count; k++) // 3 5 , 0 2
                        {
                            if (input[k] == "toberemoved")
                            {
                                input.RemoveAt(k);
                                k--;
                            }
                        }
                    

                }
                else if (command[0] == "divide")
                {
                    string word = input[int.Parse(command[1])]; //abcd ef gh ij kl = word = abcd


                    if ((word.Length / int.Parse(command[2]) < 0))
                    {
                        continue;
                    }
                    else if (word.Length % int.Parse(command[2]) == 0)
                    {

                        int indexToBeAdded = int.Parse(command[1]);
                        int ElementsToBeAdded = word.Length / int.Parse(command[2]);
                        for (int i = 0; i < int.Parse(command[2]) * ElementsToBeAdded; i += ElementsToBeAdded) // elements to be added = string.length / command[2] 0 2
                        {
                            string toBeAdded = word.Substring(i, ElementsToBeAdded);
                            input.Insert(indexToBeAdded, toBeAdded);
                            indexToBeAdded++;
                        }
                        input.RemoveAt(indexToBeAdded);
                    }
                    else
                    {
                        int indexToBeAdded = int.Parse(command[1]);
                        int elementsToRemove = word.Length % int.Parse(command[2]); // 5/2 = 1 , 8/3 = 2
                        int ElementsToBeAdded = (word.Length - elementsToRemove) / int.Parse(command[2]);
                        for (int i = 0; i < int.Parse(command[2]) * ElementsToBeAdded; i += ElementsToBeAdded) // abcde / 2 = 1
                        {
                            string toBeAdded = word.Substring(i, ElementsToBeAdded);
                            input.Insert(indexToBeAdded, toBeAdded);
                            indexToBeAdded++;
                        }
                        input.RemoveAt(indexToBeAdded);

                        int k = word.Length - elementsToRemove;

                        string final = word.Substring(k, elementsToRemove);

                        input[indexToBeAdded -1] += final;
                    }
                }
            }

            Console.WriteLine(String.Join(' ', input));
        }

    }
}
